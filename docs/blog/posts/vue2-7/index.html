<!DOCTYPE html><html lang="en">
	<head>
		<!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="icon" type="image/png" href="/GGbengSite/favicon.png">

<link rel="preload" as="style" href="/GGbengSite/styles/index.css">

<!-- Primary Meta Tags -->
<title>VUE v2.7.0 &quot;Naruto&quot; 版本发布！</title>
<meta name="title" content="VUE v2.7.0 &#34;Naruto&#34; 版本发布！">
<meta name="description" content="vue2.7的到来, 可以在vue2中使用vue3的语法!">
<link rel="canonical" href="https://ggbeng1.github.io/GGbengSite/blog/posts/vue2-7/">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://ggbeng1.github.io/GGbengSite/blog/posts/vue2-7/">
<meta property="og:title" content="VUE v2.7.0 &#34;Naruto&#34; 版本发布！">
<meta property="og:description" content="vue2.7的到来, 可以在vue2中使用vue3的语法!">
<meta property="og:image" content="https://ggbeng1.github.io/GGbengSite/assets/images/blog/vue.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://ggbeng1.github.io/GGbengSite/blog/posts/vue2-7/">
<meta property="twitter:title" content="VUE v2.7.0 &#34;Naruto&#34; 版本发布！">
<meta property="twitter:description" content="vue2.7的到来, 可以在vue2中使用vue3的语法!">
<meta property="twitter:image" content="https://ggbeng1.github.io/GGbengSite/assets/images/blog/vue.png">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@600..700&family=Lato:wght@300..700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="https://fonts.googleapis.com/icon?family=Material+Icons" as="style" onload="this.onload=null;this.rel='stylesheet'">

<noscript>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:wght@600..700&family=Lato:wght@300..700&display=swap" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
</noscript>

<link rel="stylesheet" href="/GGbengSite/styles/index.css">

<!-- For Demonstration of the themes -->
<!-- This is a simple script to check if there is a theme value in local storage. That way the theme stays with you between pages -->


<!-- Google Analytics -->


	<link rel="stylesheet" href="/GGbengSite/assets/9948f7e1.90a3b907.css" />
<link rel="stylesheet" href="/GGbengSite/assets/14ec8618.61cb46a0.css" />
<link rel="stylesheet" href="/GGbengSite/assets/702843eb.6a29fd89.css" />
<link rel="stylesheet" href="/GGbengSite/assets/blog-index-blog-posts-vite配置-blog-posts-vue2-7-blog-tags-_slug_-index.547a2a89.css" /><script type="module" src="/GGbengSite/hoisted.a4813757.js"></script></head>
	<body>
		<a href="#content" class="astro-33ITBZ4Q">Skip to main content</a>


    
		<script type="module">
  const bodyElement = document.querySelector('body');
  const menuButton = document.querySelector('#menuButton')
  const navHeader = document.querySelector('#odysseyNavHeader');
  const menuButtonIcon = document.querySelector('#menuButtonIcon');
  let scrollPosition = 0;

  menuButton.addEventListener('click', toggleMenu)

  function toggleMenu() {
    if (navHeader.hasAttribute('mobile-menu-open', true)) {
      menuButtonIcon.innerHTML = `menu`;
      // unlock scroll position
      bodyElement.style.removeProperty('overflow');
      bodyElement.style.removeProperty('position');
      bodyElement.style.removeProperty('top');
      bodyElement.style.removeProperty('width');
      window.scrollTo(0, scrollPosition);
    } else {
      menuButtonIcon.innerHTML = `close`;
      // lock scroll position
      scrollPosition = window.pageYOffset;
      bodyElement.style.overflow = 'hidden';
      bodyElement.style.position = 'fixed';
      bodyElement.style.top = `-${scrollPosition}px`;
      bodyElement.style.width = '100%';
    }
    navHeader.toggleAttribute('mobile-menu-open');
  }
</script>

<header id="odysseyNavHeader" class="header--right astro-UTGRNB2M">
  <div class="header-logo-menu__container astro-UTGRNB2M">
  <button id="menuButton" class="astro-UTGRNB2M">
    <span id="menuButtonIcon" class="material-icons astro-UTGRNB2M">menu</span>
  </button>
  <a class="header-logo__link astro-UTGRNB2M" href="/GGbengSite/">
    <span>
			<p class="odyssey-logo astro-7P4WAB7P">GGbeng</p>


		</span>
  </a>
  </div>
  <div class="header-nav__container astro-UTGRNB2M">
    <div class="header-button search-input astro-UTGRNB2M" id="docsearch-search-button">
      <svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" focusable="false" aria-hidden="true" role="img" class="astro-UTGRNB2M">
        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" transform="translate(-1)" class="astro-UTGRNB2M"></path>
      </svg>
    </div>
    <style>astro-island,astro-slot{display:contents}</style><script>(self.Astro=self.Astro||{}).only=t=>{(async()=>await(await t())())()},window.dispatchEvent(new Event("astro:only"));var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t)},o=(t,i)=>{if(t===""||!Array.isArray(i))return i;const[e,n]=i;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const i=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const s of n){const r=s.closest(this.tagName);!r||!r.isSameNode(this)||(e[s.getAttribute("data-astro-template")||"default"]=s.innerHTML,s.remove())}for(const s of i){const r=s.closest(this.tagName);!r||!r.isSameNode(this)||(e[s.getAttribute("name")||"default"]=s.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((i,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate),await import(this.getAttribute("before-hydration-url")),this.start()}start(){const i=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:s}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),r=this.getAttribute("component-export")||"default";if(!r.includes("."))this.Component=a[r];else{this.Component=a;for(const d of r.split("."))this.Component=this.Component[d]}return this.hydrator=s,this.hydrate},i,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}</script><astro-island uid="28CubF" component-url="/GGbengSite/docSearch.97fd1bb8.js" component-export="default" renderer-url="/GGbengSite/client.f1d83173.js" props="{&quot;lang&quot;:[0,&quot;zh&quot;],&quot;labels&quot;:[0,{&quot;placeholder&quot;:[0,&quot;请输入搜索内容&quot;]}],&quot;class&quot;:[0,&quot;astro-UTGRNB2M&quot;]}" ssr="" client="only" before-hydration-url="data:text/javascript;charset=utf-8,//[no before-hydration script]" opts="{&quot;name&quot;:&quot;DocSearch&quot;,&quot;value&quot;:&quot;preact&quot;}"></astro-island>
    
      <nav class="astro-UTGRNB2M">
        <ul class="astro-UTGRNB2M">
          <li class="astro-UTGRNB2M"><a href="/GGbengSite/" class="astro-UTGRNB2M">Home</a></li>
        </ul>
      </nav>
    
  </div>
  <div class="header-action-item__container astro-UTGRNB2M">
    

<a class="btn undefined undefined undefined astro-I3SAKTAM" href="/GGbengSite/blog">
  To Blog
  
  </a>




  </div>
</header>
		<main id="content">
			<div id="page">
		<div class="post-header__container astro-7I5P33G7"> 
    <ul class="post-tags__list astro-7I5P33G7">
      <li class="post-tags__tag astro-7I5P33G7">
          <a href="/GGbengSite/blog/tags/vue" class="astro-7I5P33G7">
            Vue
          </a>
        </li>
    </ul>
    <h1 class="astro-7I5P33G7">VUE v2.7.0 &quot;Naruto&quot; 版本发布！</h1>
    <p class="post-layout__date astro-7I5P33G7">
      <time class="astro-7I5P33G7"><em class="astro-7I5P33G7">2022/07/01</em></time>
    </p>
    <img class="post-layout__img astro-7I5P33G7" src="/GGbengSite/assets/images/blog/vue.png" alt="VUE v2.7.0 &#34;Naruto&#34; 版本发布！">
  </div><div class="content__container content__container--narrow astro-BYNT5YS5">
  <article id="article" class="astro-7I5P33G7">
        <h2 id="升级带来的新功能">升级带来的新功能</h2>
<ul>
<li><a href="https://vuejs.org/guide/extras/composition-api-faq.html">Composition API</a></li>
<li>SFC <a href="https://vuejs.org/api/sfc-script-setup.html"><code>&lt;script setup&gt;</code></a></li>
<li>SFC <a href="https://vuejs.org/api/sfc-css-features.html#v-bind-in-css">CSS v-bind</a></li>
<li>这也意味着v3的一些api也支持使用 <code>defineComponent</code>,<code>h()</code>, <code>useSlot()</code>, <code>useAttrs()</code>, <code>useCssModules()</code>以及<code>esmodule</code>的支持</li>
</ul>
<h3 id="注意">注意📢:</h3>
<p>顶级await是不支持的</p>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="code-container"><code><div class="line"><span style="color:undefined">// true in 2.7, false in 3.x</span></div><div class="line"><span style="color:undefined">reactive(foo) === foo</span></div></code></div></pre>
<h2 id="vue2614-需要升级的依赖">vue2.6.14 需要升级的依赖</h2>
<ul>
<li>我目前采用的是vue@2.6.14 + webpack@5.73.0 + vite@2.9.13的自建脚手架, 需要升级以下依赖</li>
</ul>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="code-container"><code><div class="line"><span style="color:undefined">   - vue@2.6.14</span></div><div class="line"><span style="color:undefined">   + vue@2.7.0</span></div><div class="line"><span style="color:undefined">   </span></div><div class="line"><span style="color:undefined">   - vue-template-compiler@2.6.14</span></div><div class="line"><span style="color:undefined">   + @vue/compiler-sfc@2.7.0</span></div><div class="line"><span style="color:undefined">   </span></div><div class="line"><span style="color:undefined">   - vue-loader@15.9.7</span></div><div class="line"><span style="color:undefined">   + vue-loader@15.10.0</span></div><div class="line"><span style="color:undefined">   </span></div><div class="line"><span style="color:undefined">   + vue-demi@0.13.1</span></div></code></div></pre>
<ul>
<li>升级@vue/compiler-sfc发现<code>:v-deep</code>无法使用 改成<code>:deep()</code></li>
</ul>
<pre class="shiki github-dark" style="background-color:#0d1117;color:#c9d1d9"><div class="code-container"><code><div class="line"><span style="color:undefined">   // 正则替换</span></div><div class="line"><span style="color:undefined">   ::v-deep\s*([^{]+) </span></div><div class="line"><span style="color:undefined">   :deep($1)</span></div></code></div></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73cdd5798fc844ffb350a2a402e66ffa~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"/></p>
<p>注意📢: <code>vite</code> 对于新版本2.7.0的plugin: <a href="https://github.com/vitejs/vite-plugin-vue2">@vitejs/plugin-vue2</a>, 但是不支持sfc的<code>jsx/tsx</code>(后续会放出另一个插件辅助),所以升级后开发环境只能暂时采用<code>webpack</code></p>
<h2 id="结尾">结尾</h2>
<p><a href="https://github.com/vuejs/vue/blob/main/CHANGELOG.md#270-2022-07-01">完整详情地址</a></p>
    </article>
</div>
	</div><div id="footer">
		<footer style="--footer-bg:var(--theme-surface-1); --footer-color:var(--theme-on-surface-1)" class="astro-Z2S6F5KL">
  <div class="content__container  astro-BYNT5YS5">
  <div class="footer-grid__container astro-Z2S6F5KL">
    <div class="footer-brand__container astro-Z2S6F5KL">
      <div class="astro-Z2S6F5KL">
        <p class="odyssey-logo astro-7P4WAB7P">GGbeng</p>


      </div>
      <ul class="footer-socials__list astro-Z2S6F5KL">
          <li class="footer-socials__item astro-Z2S6F5KL">
              <a href="https://twitter.com/GGbeng1" target="_blank" rel="noopener noreferrer" class="footer-socials__link astro-Z2S6F5KL"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.27501 20.2622C15.8272 20.2622 19.9566 14.0043 19.9566 8.58068C19.9566 8.40188 19.9566 8.22308 19.9481 8.05279C20.7484 7.47382 21.4466 6.75011 22 5.92422C21.2678 6.24777 20.4759 6.46914 19.6415 6.57131C20.493 6.06045 21.1401 5.26011 21.4466 4.298C20.6547 4.76628 19.7778 5.10685 18.8412 5.29417C18.092 4.49383 17.0277 4 15.8442 4C13.5794 4 11.7403 5.83908 11.7403 8.10388C11.7403 8.42742 11.7744 8.74245 11.851 9.04045C8.43678 8.87016 5.41422 7.23542 3.38782 4.74926C3.03874 5.35377 2.8344 6.06045 2.8344 6.80971C2.8344 8.23159 3.55811 9.4917 4.66496 10.2239C3.99234 10.2069 3.36228 10.0196 2.80885 9.71307C2.80885 9.7301 2.80885 9.74713 2.80885 9.76416C2.80885 11.7565 4.22222 13.4083 6.10387 13.7914C5.7633 13.8851 5.39719 13.9361 5.02256 13.9361C4.75862 13.9361 4.50319 13.9106 4.24777 13.8595C4.76714 15.4943 6.28267 16.6777 8.07918 16.7118C6.67433 17.8101 4.90336 18.4657 2.97914 18.4657C2.64708 18.4657 2.32354 18.4487 2 18.4061C3.79651 19.5811 5.95913 20.2622 8.27501 20.2622Z" fill="currentColor"></path>
</svg></a>            
            </li><li class="footer-socials__item astro-Z2S6F5KL">
              <a href="https://github.com/GGBeng1" target="_blank" rel="noopener noreferrer" class="footer-socials__link astro-Z2S6F5KL"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9991 1.99999C6.47773 1.99999 2 6.47713 2 12.0003C2 16.4179 4.86504 20.1663 8.83876 21.4892C9.33908 21.5807 9.52141 21.2719 9.52141 21.0067C9.52141 20.7692 9.51282 20.1405 9.50791 19.3062C6.72636 19.9103 6.13948 17.9655 6.13948 17.9655C5.68459 16.8102 5.02895 16.5026 5.02895 16.5026C4.121 15.8826 5.09771 15.8948 5.09771 15.8948C6.10142 15.9654 6.62936 16.9256 6.62936 16.9256C7.52135 18.4536 8.97014 18.0122 9.53983 17.7562C9.63069 17.1103 9.88913 16.6696 10.1746 16.4197C7.95414 16.1668 5.61951 15.3092 5.61951 11.4773C5.61951 10.3852 6.00934 9.49319 6.64901 8.79396C6.54588 8.54104 6.20271 7.52441 6.74723 6.14745C6.74723 6.14745 7.58642 5.87856 9.49685 7.17203C10.2943 6.95042 11.1501 6.83992 12.0003 6.83562C12.8499 6.83992 13.7051 6.95042 14.5038 7.17203C16.413 5.87856 17.2509 6.14745 17.2509 6.14745C17.7967 7.52441 17.4535 8.54104 17.351 8.79396C17.9919 9.49319 18.3786 10.3852 18.3786 11.4773C18.3786 15.319 16.0403 16.1643 13.8131 16.4117C14.1716 16.7205 14.4915 17.3307 14.4915 18.2638C14.4915 19.6003 14.4792 20.6789 14.4792 21.0067C14.4792 21.2744 14.6597 21.5856 15.1668 21.488C19.1374 20.1626 22 16.4173 22 12.0003C22 6.47713 17.5223 1.99999 11.9991 1.99999Z" fill="currentColor"></path>
</svg></a>            
            </li>
      </ul>
    </div>
    <div class="astro-Z2S6F5KL">
      <h6 class="astro-Z2S6F5KL">Pages</h6>   
      <ul class="footer-link__list astro-Z2S6F5KL">
        <li class="astro-Z2S6F5KL"><a href="/GGbengSite" class="astro-Z2S6F5KL">Home</a></li>
      </ul>
    </div><div class="astro-Z2S6F5KL">
      <h6 class="astro-Z2S6F5KL">Company</h6>   
      <ul class="footer-link__list astro-Z2S6F5KL">
        <li class="astro-Z2S6F5KL"><a href="/GGbengSite/blog" class="astro-Z2S6F5KL">Blog</a></li>
      </ul>
    </div>
    </div><div class="footer-copyright__container astro-Z2S6F5KL">
      <p class="astro-Z2S6F5KL">Copyright &copy; 2022 Odyssey</p>
    </div>
</div>
</footer>
	</div>
		</main>
		
	</body></html>

